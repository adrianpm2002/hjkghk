{% extends "base/base_lol.html"%}
    {% block content1%}
    <title>Administrar rol de usuario </title>
    {% endblock%}

  
  {% block content%}
  <!--Buscar-->
<form action="" style="max-width: 450px;">
    <div class="buscar-box">
        <input type="text" class="form-control" placeholder="Buscar..." name="q" value="{{ request.GET.q }}">
        <button class="btn btn-primary search">
            Buscar
        </button>
    </div>
</form>                 
         <!--fin Buscar-->
  <!-- Inicio Mensaje de satisfactorio-->
  {% if messages %}
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  {% endfor %}
{% endif %}
<!--Fin de Mensaje de satisfactorio-->

   
<br>
    <div class="container">
        <h1>Usuarios</h1>
        <table>
            <thead>
                <tr>
                    <th>Usuario</th>
                    <th>Nombre</th>
                    <th>Apellidos</th>
                    <th>Sexo</th>
                    <th>Rol de usuario</th> 
                    {% if user.is_staff %}
                    <th></th>
                    <th></th>
                    <th></th>
                      {% endif %}
                </tr>
            </thead>
            <tbody>
                {% for u in users %}
                <tr>
                    <td>{{ u.username }}</td>
                    <td>{{ u.first_name }}</td>
                    <td>{{ u.last_name }}</td>
                    <td>{{u.sexo}}</td>
                    <td>{{u.Rol_de_usuario}}</td>
                    
                    
                    <td ><a href= "{% url 'editaruser' u.id%}"> 
                        <svg style="opacity:0.7;"width="20" fill="#000000" xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 0 48 48" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 16 16">
                                                <path d="m46.242,10.245l-4.467,4.467-8.616-8.352 4.599-4.599c2.34-2.343 6.141-2.343 8.484,0 2.343,2.34 2.343,6.138 0,8.484zm-7.083,7.08l-18.465,18.42-11.694,3.255 3.207-11.739 18.363-18.315 8.589,8.379zm7.083-7.08l-4.467,4.467-8.616-8.352 4.599-4.599c2.34-2.343 6.141-2.343 8.484,0 2.343,2.34 2.343,6.138 0,8.484zm-7.083,7.08l-18.465,18.42-11.694,3.255 3.204-11.739 18.363-18.315 8.592,8.379zm2.841,5.643l6-5.997v22.029c0,4.971-4.029,9-9,9h-30c-4.971,0-9-4.029-9-9v-30c0-4.971 4.029-9 9-9h22.026l-6.012,6h-16.014c-1.656,0-3,1.344-3,3v30c0,1.659 1.344,3 3,3h30c1.659,0 3-1.341 3-3v-16.032Z"/>
                                                </svg>

                    </a>
                    
                  </td>
                  <td>
                   <a href = "{% url 'eliminaruser' u.id%}">
                    <svg enable-background="new 0 0 91 91" height="32px" id="Layer_1" version="1.1" viewBox="0 0 91 91" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" 
                    xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M67.305,36.442v-8.055c0-0.939-0.762-1.701-1.7-1.701H54.342v-5.524c0-0.938-0.761-1.7-1.699-1.7h-12.75   
                    c-0.939,0-1.701,0.762-1.701,1.7v5.524H26.93c-0.939,0-1.7,0.762-1.7,1.701v8.055c0,0.938,0.761,1.699,1.7,1.699h0.488v34.021   c0,0.938,0.761,1.7,1.699,1.7h29.481c3.595,0,6.52-2.924,6.52-6.518V38.142h0.486C66.543,38.142,67.305,37.381,67.305,36.442z  
                    M41.592,22.862h9.35v3.824h-9.35V22.862z M61.719,67.345c0,1.719-1.4,3.117-3.12,3.117h-27.78v-32.32l30.9,0.002V67.345z    M63.904,34.742H28.629v-4.655h11.264h12.75h11.262V34.742z"/><rect height="19.975" width="3.4" x="36.066" y="44.962"/><rect height="19.975" 
                    width="3.4" x="44.566" y="44.962"/><rect height="19.975" width="3.4" x="53.066" y="44.962"/></g></svg>
                    </a>


                <td>
                    <a onclick="abrir_modal_edicion('{% url 'updateRol' u.pk %}')"  style="cursor: pointer !important;"><?xml version="1.0" encoding="UTF-8"?>
                    <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="24px" height="24px" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <g><path style="opacity:0.938" fill="#bdd1fa" d="M 9.5,1.5 C 13.3472,2.52391 14.3472,4.85724 12.5,8.5C 11.675,9.38568 10.675,9.71901 9.5,9.5C 10.1534,8.19322 10.8201,6.85989 11.5,5.5C 10.8201,4.14011 10.1534,2.80678 9.5,1.5 Z"/></g>
                    <g><path style="opacity:0.592" fill="#2d6fff" d="M 4.5,1.5 C 5.49162,1.32842 6.15829,1.66175 6.5,2.5C 4.80077,5.57442 5.46743,7.90776 8.5,9.5C 8.5,10.1667 8.5,10.8333 8.5,11.5C 5.56135,12.456 3.22802,14.1226 1.5,16.5C 0.833333,16.5 0.5,16.1667 0.5,15.5C 1.05527,13.2712 2.3886,11.6046 4.5,10.5C 2.01648,7.32908 2.01648,4.32908 4.5,1.5 Z"/></g>
                    <g><path style="opacity:0.624" fill="#3c78fe" d="M 6.5,-0.5 C 8.16667,-0.5 9.83333,-0.5 11.5,-0.5C 15.7311,2.26559 16.3977,5.76559 13.5,10C 14.1667,10.6667 14.8333,10.6667 15.5,10C 16.5731,6.68812 18.5731,5.52146 21.5,6.5C 21.6716,7.49162 21.3382,8.15829 20.5,8.5C 20.5654,8.06178 20.3988,7.72845 20,7.5C 17.294,9.87058 14.9606,12.5372 13,15.5C 12.2599,16.7494 12.4265,17.7494 13.5,18.5C 13.5,19.1667 13.8333,19.5 14.5,19.5C 13.5,20.1667 12.5,20.8333 11.5,21.5C 11.1667,21.5 10.8333,21.5 10.5,21.5C 10.2924,19.0799 10.6258,16.7466 11.5,14.5C 10.8118,13.1451 9.81181,12.1451 8.5,11.5C 8.5,10.8333 8.5,10.1667 8.5,9.5C 8.83333,9.5 9.16667,9.5 9.5,9.5C 10.675,9.71901 11.675,9.38568 12.5,8.5C 14.3472,4.85724 13.3472,2.52391 9.5,1.5C 8.39105,1.55688 7.39105,1.89022 6.5,2.5C 6.15829,1.66175 5.49162,1.32842 4.5,1.5C 5.16667,0.833333 5.83333,0.166667 6.5,-0.5 Z"/></g>
                    <g><path style="opacity:0.56" fill="#2d72fe" d="M 21.5,6.5 C 22.1667,6.83333 22.8333,7.16667 23.5,7.5C 23.5,8.83333 23.5,10.1667 23.5,11.5C 18.6182,14.3623 17.2849,18.3623 19.5,23.5C 12.8333,23.5 6.16667,23.5 -0.5,23.5C -0.5,20.8333 -0.5,18.1667 -0.5,15.5C -0.166667,15.5 0.166667,15.5 0.5,15.5C 0.5,16.1667 0.833333,16.5 1.5,16.5C 1.5,18.1667 1.5,19.8333 1.5,21.5C 4.5,21.5 7.5,21.5 10.5,21.5C 10.8333,21.5 11.1667,21.5 11.5,21.5C 13.5,21.5 15.5,21.5 17.5,21.5C 18.0443,17.3601 17.0443,16.6935 14.5,19.5C 13.8333,19.5 13.5,19.1667 13.5,18.5C 14.1667,18.5 14.5,18.1667 14.5,17.5C 15.1667,17.5 15.5,17.1667 15.5,16.5C 15.5,16.1667 15.5,15.8333 15.5,15.5C 16.1667,15.5 16.5,15.1667 16.5,14.5C 17.1667,14.5 17.5,14.1667 17.5,13.5C 18.1667,13.5 18.5,13.1667 18.5,12.5C 19.9063,12.0269 20.573,11.0269 20.5,9.5C 20.5,9.16667 20.5,8.83333 20.5,8.5C 21.3382,8.15829 21.6716,7.49162 21.5,6.5 Z"/></g>
                    <g><path style="opacity:0.778" fill="#bed2fb" d="M 20.5,8.5 C 20.5,8.83333 20.5,9.16667 20.5,9.5C 19.0937,9.97306 18.427,10.9731 18.5,12.5C 17.8333,12.5 17.5,12.8333 17.5,13.5C 16.8333,13.5 16.5,13.8333 16.5,14.5C 15.8333,14.5 15.5,14.8333 15.5,15.5C 15.5,15.8333 15.5,16.1667 15.5,16.5C 14.8333,16.5 14.5,16.8333 14.5,17.5C 13.8333,17.5 13.5,17.8333 13.5,18.5C 12.4265,17.7494 12.2599,16.7494 13,15.5C 14.9606,12.5372 17.294,9.87058 20,7.5C 20.3988,7.72845 20.5654,8.06178 20.5,8.5 Z"/></g>
                    <g><path style="opacity:0.996" fill="#b3c9fa" d="M 11.5,21.5 C 12.5,20.8333 13.5,20.1667 14.5,19.5C 17.0443,16.6935 18.0443,17.3601 17.5,21.5C 15.5,21.5 13.5,21.5 11.5,21.5 Z"/></g>
                    </svg></a>
                </td>
                
                
                </tr>
                {% empty %}
                <tr>
                    <td colspan="2">No hay usuarios disponibles.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!--Inicio de paginación-->
        <div class="text-end mb-5">
            {{ page_obj.paginator.count }} resultado{{ page_obj.paginator.count|pluralize }}
        </div>
        
        <div class="d-flex justify-content-between align-items-center">
            <small class="d-none d-sm-inline-block text-body">
                Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}
            </small>
        
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    {% if page_obj.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="{% url 'listar_usuario_rol' %}?page={{ page_obj.previous_page_number }}"
                               aria-label="Anterior">
                                <span aria-hidden="true">
                                    <<
                                </span>
                            </a>
                        </li>
                    {% else %}
                        <li class="page-item disabled">
                            <a class="page-link" href="#" aria-label="Anterior">
                                <span aria-hidden="true">
                                    <<
                                </span>
                            </a>
                        </li>
                    {% endif %}
        
                    {% for page in page_obj.adjusted_elided_pages %}
                        <li class="page-item {% if page_obj.number == page %}active{% endif %}">
                            <a class="page-link" href="{% url 'listar_usuario_rol' %}?page={{ page }}">
                                {{ page }}
                            </a>
                        </li>
                    {% endfor %}
        
                    {% if page_obj.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="{% url 'listar_usuario_rol' %}?page={{ page_obj.next_page_number }}"
                               aria-label="Siguiente">
                                <span aria-hidden="true">
                                    >>
                                </span>
                            </a>
                        </li>
                    {% else %}
                        <li class="page-item disabled">
                            <a class="page-link" href="#" aria-label="Siguiente">
                                <span aria-hidden="true">
                                    >>
                                </span>
                            </a>
                        </li>
                    {% endif %}
                </ul>
            </nav>
        </div>
    <!-- Fin de Paginacion-->
    </div>

    <!-- Update Modal-->
        <div class="modal fade" id="edicion" role="dialog"> 
        
        </div>

    <!-- Registrar Modal-->
        <div class="modal fade" id="creacion" role="dialog"> 
        
        </div>

{% endblock%}

    {% block extrajs %}
    <script type="text/javascript">
    var $ = jQuery.noConflict();
    function abrir_modal_edicion(url){
        $('#edicion').load(url,function(){
            $(this).modal('show');
        });
    }

    function abrir_modal_creacion(url){
        $('#creacion').load(url,function(){
            $(this).modal('show');
        });
    }

    function abrir_modal_eliminacion(url){
        $('#eliminacion').load(url,function(){
            $(this).modal('show');
        });
    }
</script>
    {% endblock%}

 


